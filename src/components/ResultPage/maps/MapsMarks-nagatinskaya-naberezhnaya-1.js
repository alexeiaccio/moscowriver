import React, { Component, Fragment } from 'react'
import styled from 'styled-components'
import { key } from 'styled-theme'

const Svg = styled.svg`
  min-width: 650px;
  height: 500px;
  z-index: 1;
  @media (max-width: 1199px) {
    margin-left: -110px;
  }
  transition: all .2s ease-in-out;
`

const Map = styled.div`
  width: 650px;
  height: 500px;
  position: absolute;
  top: 0;
  right: 0;
  background: url(${({back}) =>  back}) no-repeat;
  transition: all .2s ease-in-out;
`

const MapsMarks = ({state, uid}) => {
  const MapsBack = require(`./maps-${uid}.png`)
  const getActive = (active) =>
    state.items[active]
      .map((item, i) => item && i)
      .filter(item => item)
      .join()

  return (
    <Fragment>
      <Map back={MapsBack} />
      <Svg width="650" height="500" viewBox="0 0 650 500" fill="none" xmlns="http://www.w3.org/2000/svg" >
        <g id="Canvas" fill="none">
          {state.activeList === 2 &&
            <g id="maps_2" strokeLinecap="round">
              <path id="mark_2-0" d="M608.5 273.5L286.544 316.416M286.544 316.416C268.35 315.054 226.324 309.697 203.764 299.165C181.205 288.633 132.204 250.893 110.524 233.34M286.544 316.416C278.205 318.686 258.162 323.407 244.699 324.133C231.236 324.86 210.284 322.317 201.49 320.956M110.524 233.34L92.3307 196.568L57.3087 64.4635L46.3928 0M110.524 233.34L127.353 256.492L188.755 313.238M193.303 332.759L183.752 429L0 371.346M193.303 332.759L201.49 320.956M193.303 332.759L188.755 313.238M201.49 320.956L188.755 313.238"
                transform="translate(33 30)" stroke="#5D5957" strokeWidth={state.items[2][0] ? 8 : 2} />
              <path id="mark_2-1" d="M42.0991 0H120.699M21.2277 51.0533L65.4449 97.1408M0 79.5074L27.532 170.538" transform="translate(505.773 441.042) rotate(-126.724)"
                stroke="#945BA4" strokeWidth={state.items[2][1] ? 8 : 2} />
              <g id="mark_2-2" transform="translate(211.5 296)" stroke="#EB5A59" strokeWidth={state.items[2][2] ? 8 : 0} >
                <path d="M209.5 37.5C209.5 41.6421 206.142 45 202 45C197.858 45 194.5 41.6421 194.5 37.5C194.5 33.3579 197.858 30 202 30C206.142 30 209.5 33.3579 209.5 37.5Z"
                  fill="#EB5A59" />
                <path d="M335.5 22.5C335.5 26.6421 332.142 30 328 30C323.858 30 320.5 26.6421 320.5 22.5C320.5 18.3579 323.858 15 328 15C332.142 15 335.5 18.3579 335.5 22.5Z"
                  fill="#EB5A59" />
                <path d="M429.5 7.5C429.5 11.6421 426.142 15 422 15C417.858 15 414.5 11.6421 414.5 7.5C414.5 3.35786 417.858 0 422 0C426.142 0 429.5 3.35786 429.5 7.5Z"
                  fill="#EB5A59" />
                <path d="M15 135C15 139.142 11.6421 142.5 7.5 142.5C3.35786 142.5 0 139.142 0 135C0 130.858 3.35786 127.5 7.5 127.5C11.6421 127.5 15 130.858 15 135Z"
                  fill="#EB5A59" />
              </g>
              <g id="mark_2-4" transform="translate(425 309)" stroke="#53B36C" strokeWidth={state.items[2][4] ? 8 : 0} >
                <path d="M0 17.3651L9.90639 16L11.954 30.8596L2.04761 32.2247L0 17.3651Z" fill="#53B36C" />
                <path d="M122 1.36507L131.906 0L133.954 14.8596L124.048 16.2247L122 1.36507Z" fill="#53B36C" />
              </g>
              <g id="mark_2-5" transform="translate(78.233 74.4453)" stroke="#EB5A59" strokeWidth={state.items[2][5] ? 8 : 0} >
                <path d="M158.587 272.555L168.258 275.102L164.437 289.607L154.767 287.06L158.587 272.555Z" fill="#EB5A59" />
                <path d="M33.5222 78.3633L36.0249 88.0451L21.5022 91.799L18.9996 82.1173L33.5222 78.3633Z" fill="#EB5A59" />
                <path d="M52.7767 148.461L57.2203 157.419L43.7826 164.085L39.339 155.126L52.7767 148.461Z" fill="#EB5A59" />
                <path d="M14.7534 0L16.5592 9.83561L1.80576 12.5442L0 2.70864L14.7534 0Z" fill="#EB5A59" />
                <path d="M166.587 247.555L176.258 250.102L172.437 264.607L162.767 262.06L166.587 247.555Z" fill="#EB5A59" />
              </g>
              <path id="mark_2-6" d="M398.5 0L199.5 25.5L82 42L51.5 40L0 28" transform="translate(243 301)" stroke="#C4549A" strokeWidth={state.items[2][6] ? 8 : 2} />
              <path id="mark_2-7" d="M40 0L0 105.5M307 123.5L295 191" transform="translate(140.5 134.5)" stroke="#F0C41B" strokeWidth={state.items[2][7] ? 8 : 2} />
              <path id="mark_2-3" d="M16 17.8523L0 20C0 21.3333 0 24.3 0 25.5C0 26.7 1.66667 27 2.5 27C7.48222 26.3044 13.0443 25.5264 19 24.6919M16 17.8523L19 24.6919M16 17.8523L27 16.3758M19 24.6919C20.7991 24.4398 22.6342 24.1826 24.5 23.9209M24.5 23.9209L27 16.3758M24.5 23.9209C29.6357 23.2005 35.0047 22.4464 40.5 21.6733M27 16.3758L66.5 11.0738M40.5 21.6733L41.5 16.3758L118 7L121.5 10.1372M40.5 21.6733C49.349 20.4283 58.5255 19.1341 67.5824 17.8523M121.5 10.1372C132.79 8.48953 140.483 7.32512 142 7C147.6 5.8 149 1.83333 149 0L92 7.65101M121.5 10.1372C112.88 11.3952 102.164 12.9349 90.5 14.5979M66.5 11.0738L67.5824 17.8523M66.5 11.0738L85.675 8.5M67.5824 17.8523C74.5256 16.8697 81.3986 15.8944 88 14.9542M85.675 8.5L88 14.9542M85.675 8.5L92 7.65101M88 14.9542C88.8378 14.8348 89.6713 14.7161 90.5 14.5979M90.5 14.5979L92 7.65101" transform="translate(444 314.5)" stroke="#53B36C" strokeWidth={state.items[2][3] ? 4 : 2}/>
              {/* Active */}
              <use xlinkHref={`#mark_2-${ getActive(2) || 0 }`} />
            </g>
          }
          {state.activeList === 1 &&
            <g id="maps_1">
            <path id="mark_1-4" d="M151.459 0L0 20.4286V28.6L146.001 8.6254L151.459 0Z" transform="translate(445.077 312.368)" fill="#53B36C" stroke="#53B36C" strokeWidth={state.items[1][4] ? 10 : 0}
            />
            <path id="mark_1-3" d="M21.8319 12.4136C15.3126 7.72263 1.81932 -1.29621 0 0.15649C0 1.97192 3.18382 4.96811 5.00314 6.05764C7.2773 7.41954 23.1964 22.4005 31.8382 30.5719C40.48 38.7434 51.3959 46.9148 59.5829 49.1846C66.1324 51.0005 87.7824 49.9412 97.7887 49.1846C98.5468 47.0661 98.9713 42.6475 94.6049 41.9211C89.1469 41.0132 53.6701 29.664 46.8476 26.9402C41.3896 24.7611 27.8963 16.3479 21.8319 12.4136Z"
              transform="translate(181.275 301.317)" fill="#53B36C" stroke="#53B36C" strokeWidth={state.items[1][3] ? 10 : 0} />
            <path id="mark_1-2" d="M4.09348 3.63175L0 0L15.9191 57.2L17.7384 51.2984L4.09348 3.63175Z" transform="translate(104.863 125.333)"
              fill="#EB5A59" stroke="#EB5A59" strokeWidth={state.items[1][2] ? 10 : 0} />
            <path id="mark_1-1" d="M3.18382 0.453968L0 0L5.45797 29.9619L8.18696 26.3302L3.18382 0.453968Z" transform="translate(91.2184 63.5938)"
              fill="#EB5A59" stroke="#EB5A59" strokeWidth={state.items[1][1] ? 10 : 0} />
            <path id="mark_1-0" d="M128.466 298.965C128.856 299.355 129.49 299.354 129.88 298.964C130.27 298.573 130.269 297.94 129.878 297.549L128.466 298.965ZM84.5986 258.308L83.8798 259.003L84.5986 258.308ZM45.0283 190.667L45.9832 190.37L45.0283 190.667ZM17.7384 81.2603L18.7098 81.0229L17.7384 81.2603ZM0.986707 -0.162507C0.896957 -0.70745 0.382437 -1.07646 -0.162507 -0.986707C-0.70745 -0.896957 -1.07646 -0.382437 -0.986707 0.162507L0.986707 -0.162507ZM129.878 297.549C123.933 291.615 115.302 284.232 106.922 277.047C98.5158 269.839 90.3713 262.837 85.3173 257.613L83.8798 259.003C89.0141 264.311 97.2435 271.382 105.62 278.565C114.024 285.771 122.586 293.096 128.466 298.965L129.878 297.549ZM85.3173 257.613C73.8877 245.797 67.0369 238.487 61.547 229.401C56.057 220.314 51.9026 209.407 45.9832 190.37L44.0734 190.964C49.9967 210.014 54.2096 221.124 59.8352 230.435C65.4608 239.746 72.4738 247.212 83.8798 259.003L85.3173 257.613ZM45.9832 190.37C37.8084 164.079 23.2702 99.685 18.7098 81.0229L16.767 81.4977C21.3033 100.061 35.8743 164.594 44.0734 190.964L45.9832 190.37ZM18.7098 81.0229C15.0695 66.1258 4.61806 21.8863 0.986707 -0.162507L-0.986707 0.162507C2.65923 22.2999 13.1301 66.6145 16.767 81.4977L18.7098 81.0229Z"
              transform="translate(78.4831 35.4473)" fill="#C4549A" strokeLinecap="round" stroke="#C4549A" strokeWidth={state.items[1][0] ? 8 : 2} />
            </g>
          }
          {state.activeList === 0 &&
            <g id="maps_0">
              <path id="mark_0-0" d="M18.6481 1.3619L15.4643 0L0 3.63175C3.63865 25.7249 11.8256 73.6337 15.4643 88.5238C20.0126 107.137 31.3411 167.507 41.8445 192.483C57.3087 229.254 82.7793 257.854 95.5145 271.019C105.703 281.551 138.269 307.79 161.92 321.41C165.104 312.784 169.197 301.435 171.926 293.717C152.823 287.362 123.259 267.387 106.43 255.13C92.9675 245.324 74.7439 217.753 67.315 205.194L57.3087 179.771L50.4863 152.533L34.1123 94.8794L33.2027 88.5238L29.564 78.9905L26.3802 64.9175L15.4643 7.26349L18.6481 1.3619Z"
                transform="translate(70.751 30.9072)" fill="#F0C41B" stroke="#F0C41B" strokeWidth={state.items[0][0] ? 10 : 0} />
              <path id="mark_0-1" d="M4.09348 3.63175L0 0L15.9191 57.2L17.7384 51.2984L4.09348 3.63175Z" transform="translate(104.863 125.333)"
                fill="#EB5A59" stroke="#EB5A59" strokeWidth={state.items[0][1] ? 10 : 0} />
              <path id="mark_0-2" d="M3.18382 0.453968L0 0L5.45797 29.9619L8.18696 26.3302L3.18382 0.453968Z" transform="translate(91.2184 63.5938)"
                fill="#EB5A59" stroke="#EB5A59" strokeWidth={state.items[0][2] ? 10 : 0} />
              <path id="mark_0-3" d="M104.156 23.6063C74.5923 25.8762 51.8507 20.4286 35.022 15.8889C26.5334 13.599 17.2372 10.5873 10.0063 8.10533L0 35.8635C2.42577 37.3767 12.8262 41.4927 35.022 45.8508C62.7667 51.2984 104.156 49.4825 164.194 42.673C212.224 37.2254 264.257 27.6921 284.269 23.6063L280.176 0C233.632 6.50688 127.808 21.7905 104.156 23.6063Z"
                transform="translate(232.671 316.454)" fill="#53B36C" stroke="#53B36C" strokeWidth={state.items[0][3] ? 10 : 0} />
              {/* Active */}
              <use xlinkHref={`#mark_0-${ getActive(0) || 0 }`} />
            </g>
          }
        </g>
      </Svg>
    </Fragment>
  )
}

export default MapsMarks

